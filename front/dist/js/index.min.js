function Index(){var e=this;e.page=2,e.category_id=0,e.loadBtn=$("#load-more-btn"),template.defaults.imports.timeSince=function(e){var t=new Date(e),n=t.getTime(),a=((new Date).getTime()-n)/1e3;return a<60?"刚刚":60<=a&&a<3600?(minutes=parseInt(a/60),minutes+"分钟前"):3600<=a&&a<86400?(hours=parseInt(a/60/60),hours+"小时前"):86400<=a&&a<2592e3?(days=parseInt(a/60/60/24),days+"天前"):t.getFullYear()+"/"+t.getMonth()+"/"+t.getDate()+t.getHours()+":"+t.getMinutes()}}Index.prototype.listenLoadMoreEvent=function(){var a=this,i=$("#load-more-btn");i.click(function(){xfzajax.get({url:"/news/list/",data:{p:a.page,category_id:a.category_id},success:function(e){if(200===e.code){var t=e.data;if(0<t.length){var n=template("news-item",{newses:t});$(".list-inner-group").append(n),a.page+=1}else i.hide()}}})})},Index.prototype.listenCategorySwitchEvent=function(){var o=this;$(".list-tab").children().click(function(){var i=$(this),s=i.attr("data-category");xfzajax.get({url:"/news/list/",data:{category_id:s,p:1},success:function(e){if(200===e.code){var t=e.data,n=template("news-item",{newses:t}),a=$(".list-inner-group");a.empty(),a.append(n),o.page=2,o.category_id=s,i.addClass("active").siblings().removeClass("active"),o.loadBtn.show()}}})})},Index.prototype.run=function(){this.listenLoadMoreEvent(),this.listenCategorySwitchEvent()},$(function(){(new Index).run()});